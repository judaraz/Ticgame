<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>Watch & Earn Ads</title>

<!-- Telegram WebApp -->
<script src="https://telegram.org/js/telegram-web-app.js"></script>

<!-- Monetag SDK -->
<script src="//libtl.com/sdk.js" data-zone="10412754" data-sdk="show_10412754"></script>

<!-- RichPartners SDK -->
<script src="https://richinfo.co/richpartners/telegram/js/tg-ob.js"></script>

<!-- Onclick (TMA) Reward SDK -->
<script src="https://js.onclckvd.com/in-stream-ad-admanager/tma.js"></script>

<script>
/* ---------- RichPartners Init ---------- */
window.TelegramAdsController = new TelegramAdsController();
window.TelegramAdsController.initialize({
  pubId: "956231",
  appId: "5571",
});

/* ---------- Onclick Init ---------- */
let showTmaAd = null;
window.initCdTma?.({ id: "6089929" })
  .then(show => showTmaAd = show)
  .catch(e => console.log("TMA init failed", e));
</script>

<style>
*{box-sizing:border-box;font-family:Segoe UI,Roboto,sans-serif;margin:0;padding:0;}
body{
    height:100vh;
    display:flex;
    justify-content:center;
    align-items:center;
    background:#0a0a0a;
    overflow:hidden;
    position:relative;
    color:#fff;
}
.panel{
    width:360px;
    background:#0c0c0c;
    border-radius:24px;
    padding:24px;
    box-shadow:0 25px 70px rgba(0,0,0,.7);
}
.title{
    text-align:center;
    font-size:22px;
    margin-bottom:20px;
    font-weight:700;
}
.card{
    background:#111;
    border:1px solid #2b2b2b;
    border-radius:18px;
    padding:18px;
    margin-bottom:16px;
    cursor:pointer;
    transition:.3s;
}
.card:hover{
    border-color:#00ffe0;
}
.card h4{
    margin-bottom:6px;
}
.card span{
    font-size:12px;
    color:#aaa;
}
.footer{
    text-align:center;
    margin-top:14px;
    font-size:12px;
    color:#777;
}
</style>
</head>

<body>

<div class="panel">
    <div class="title">Watch & Earn</div>

    <!-- RichPartners (Primary) -->
    <div class="card" onclick="watchRichWithFallback()">
        <h4>RichPartners</h4>
        <span>High CPM • Primary</span>
    </div>

    <!-- Monetag -->
    <div class="card" onclick="watchMonetag()">
        <h4>Monetag</h4>
        <span>Fast Load • Backup</span>
    </div>

    <div class="footer">Ad plays automatically</div>
</div>

<script>
Telegram.WebApp.ready();
Telegram.WebApp.expand();

/* ---------- Monetag ---------- */
function watchMonetag() {
    if (typeof window.show_10412754 === "function") {
        show_10412754();
    } else {
        alert("Monetag not ready");
    }
}

/* ---------- RichPartners with TMA fallback ---------- */
function watchRichWithFallback() {
    try {
        if (window.TelegramAdsController) {
            window.TelegramAdsController.showAd();
        } else {
            throw new Error("Rich SDK missing");
        }
    } catch (e) {
        console.log("Rich failed → fallback to TMA", e);
        showTmaFallback();
    }
}

/* ---------- TMA Reward Fallback ---------- */
function showTmaFallback() {
    if (showTmaAd) {
        showTmaAd()
            .then(() => console.log("TMA ad played"))
            .catch(err => {
                console.log("TMA failed", err);
                alert("No ads available right now");
            });
    } else {
        alert("Ads not ready yet");
    }
}
</script>

</body>
</html>
