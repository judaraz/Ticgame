<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>Watch & Earn Ads</title>

<!-- Telegram WebApp -->
<script src="https://telegram.org/js/telegram-web-app.js"></script>

<!-- Monetag SDK (backup) -->
<script src="//libtl.com/sdk.js"
        data-zone="9858364"
        data-sdk="show_9858364"></script>

<!-- RichAds SDK -->
<script src="https://richinfo.co/richpartners/telegram/js/tg-ob.js"></script>

<script>
Telegram.WebApp.ready();
Telegram.WebApp.expand();

/* ---------------- RICHADS CONTROLLER ---------------- */
let RichController;
let RichReady = false;

function initRichAds() {
    try {
        RichController = new TelegramAdsController();

        RichController.initialize({
            pubId: "956231",
            appId: "5556"
        });

        RichReady = true;

        // Load ALL formats together
        preloadRichAds();

        console.log("RichAds initialized (push + interstitial + video)");
    } catch (e) {
        console.error("RichAds init error", e);
    }
}

/* Preload all formats */
function preloadRichAds() {
    if (!RichController) return;

    try {
        // Push ads (persistent)
        RichController.load?.();

        // Interstitial
        RichController.loadInterstitial?.();

        // Rewarded / video
        RichController.loadRewarded?.();

    } catch (e) {}
}

/* Keep ads alive */
setInterval(preloadRichAds, 20000);

/* Show interstitial / video on click */
function showRichFullscreen() {
    if (!RichReady) return fallbackMonetag();

    try {
        RichController.showAd(); // auto-select best format
        preloadRichAds();        // reload after show
    } catch (e) {
        fallbackMonetag();
    }
}

/* ---------------- FALLBACK ---------------- */
function fallbackMonetag() {
    if (typeof window.show_9858364 === "function") {
        window.show_9858364();
    }
}

/* ---------------- INIT ---------------- */
initRichAds();
</script>

<style>
*{box-sizing:border-box;font-family:Segoe UI,Roboto,sans-serif;margin:0;padding:0}
body{
    height:100vh;
    display:flex;
    justify-content:center;
    align-items:center;
    background:#0a0a0a;
    color:#fff;
}
.panel{
    width:360px;
    background:#0c0c0c;
    border-radius:24px;
    padding:24px;
    box-shadow:0 25px 70px rgba(0,0,0,.7);
}
.title{
    text-align:center;
    font-size:22px;
    margin-bottom:20px;
    font-weight:700;
}
.card{
    background:#111;
    border:1px solid #2b2b2b;
    border-radius:18px;
    padding:18px;
    margin-bottom:16px;
    cursor:pointer;
    transition:.3s;
}
.card:hover{
    border-color:#00ffe0;
    box-shadow:0 0 20px rgba(0,255,224,.4);
}
.card h4{margin:0 0 8px;font-size:17px}
.card span{font-size:12px;color:#aaa}
.footer{
    text-align:center;
    margin-top:14px;
    font-size:12px;
    color:#777;
}
</style>
</head>

<body>

<div class="panel">
    <div class="title">Watch & Earn</div>

    <div class="card" onclick="showRichFullscreen()">
        <h4>Watch Ad</h4>
        <span>RichAds Video / Interstitial</span>
    </div>

    <div class="footer">
        Push ads stay active in background
    </div>
</div>

</body>
</html>
