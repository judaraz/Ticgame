<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>Watch & Earn Ads</title>

<!-- Telegram WebApp -->
<script src="https://telegram.org/js/telegram-web-app.js"></script>

<!-- Monetag SDK -->
<script src="//libtl.com/sdk.js"
        data-zone="9858364"
        data-sdk="show_9858364"></script>

<!-- RichAds SDK -->
<script src="https://richinfo.co/richpartners/telegram/js/tg-ob.js"></script>

<script>
/* ---------------- RICHADS CORE ---------------- */
let RichReady = false;
let RichController = null;

function initRichAds() {
    try {
        RichController = new TelegramAdsController();
        RichController.initialize({
            pubId: "956231",
            appId: "5556"
        });

        // Warm up ads
        warmRichAds();

        RichReady = true;
        console.log("✅ RichAds initialized");
    } catch (e) {
        console.error("❌ RichAds init failed", e);
    }
}

// Keep RichAds warm
function warmRichAds() {
    if (!RichController) return;
    try {
        RichController.load?.();
        RichController.loadInterstitial?.();
        RichController.loadRewarded?.();
    } catch (e) {}
}

// Re-warm every 20 seconds
setInterval(warmRichAds, 20000);

// Show RichAds safely
function showRichAd() {
    if (!RichReady || !RichController) return false;
    try {
        RichController.showAd();
        return true;
    } catch (e) {
        console.warn("RichAds show failed");
        return false;
    }
}

/* ---------------- MONETAG ---------------- */
let monetagRetry = 0;
const monetagMaxRetry = 5;

function watchMonetag() {
    if (typeof window.show_9858364 === "function") {
        window.show_9858364();
        monetagRetry = 0;
        return;
    }

    if (monetagRetry < monetagMaxRetry) {
        monetagRetry++;
        setTimeout(watchMonetag, 1000);
    } else {
        console.warn("Monetag not ready");
    }
}

/* ---------------- UI HANDLERS ---------------- */
function watchRich() {
    if (!showRichAd()) {
        console.warn("RichAds not ready yet");
    }
}

/* ---------------- INIT ---------------- */
Telegram.WebApp.ready();
Telegram.WebApp.expand();
initRichAds();
</script>

<style>
*{box-sizing:border-box;font-family:Segoe UI,Roboto,sans-serif;margin:0;padding:0;}
body{
    height:100vh;
    display:flex;
    justify-content:center;
    align-items:center;
    background:#0a0a0a;
    overflow:hidden;
    color:#fff;
}
.panel{
    width:360px;
    background:#0c0c0c;
    border-radius:24px;
    padding:24px;
    box-shadow:0 25px 70px rgba(0,0,0,.7);
}
.title{
    text-align:center;
    font-size:22px;
    margin-bottom:20px;
    font-weight:700;
}
.card{
    background:#111;
    border:1px solid #2b2b2b;
    border-radius:18px;
    padding:18px;
    margin-bottom:16px;
    cursor:pointer;
    transition:.3s;
}
.card:hover{
    border-color:#00ffe0;
    box-shadow:0 0 20px rgba(0,255,224,.4);
}
.card h4{margin:0 0 8px;font-size:17px}
.card span{font-size:12px;color:#aaa}
.footer{
    text-align:center;
    margin-top:14px;
    font-size:12px;
    color:#777;
}
</style>
</head>

<body>

<div class="panel">
    <div class="title">Watch & Earn</div>

    <div class="card" onclick="watchRich()">
        <h4>RichAds</h4>
        <span>Always Preloaded • Priority</span>
    </div>

    <div class="card" onclick="watchMonetag()">
        <h4>Monetag</h4>
        <span>Backup Network</span>
    </div>

    <div class="footer">Tap a network to watch ads</div>
</div>

</body>
</html>
