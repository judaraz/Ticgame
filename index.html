<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>Watch & Earn Ads</title>

<!-- Telegram WebApp -->
<script src="https://telegram.org/js/telegram-web-app.js"></script>

<!-- ================= RICHPARTNERS SDK ================= -->
<script src="https://richinfo.co/richpartners/telegram/js/tg-ob.js"></script>
<script>
window.TelegramAdsController = new TelegramAdsController();

window.TelegramAdsController.initialize({
  pubId: "956231",
  appId: "5572",
  push: true,
  interstitial: true
});

let richReady = false;

// FORCE AD PRELOAD
window.TelegramAdsController.onReady(function () {
  richReady = true;
});
</script>

<!-- YOUR EXISTING CSS FILES (UNCHANGED) -->
<!-- <link rel="stylesheet" href="style.css"> -->

</head>
<body>

<!-- =================
     YOUR EXISTING HTML
     NOTHING MODIFIED
================== -->

<!-- ================= AD LOGIC ONLY ================= -->
<script>
async function showMonetixAd() {
  return new Promise((resolve, reject) => {
    if (!window.TelegramAdsController || !richReady) {
      return reject("Ad not ready");
    }

    try {
      // INTERSTITIAL
      window.TelegramAdsController.show();

      // PUSH AFTER (non-blocking)
      setTimeout(function () {
        try {
          window.TelegramAdsController.push();
        } catch (e) {}
      }, 400);

      resolve(true);
    } catch (e) {
      reject("Ad failed");
    }
  });
}

// OPTIONAL WRAPPER (USE ONLY IF YOU WANT)
async function runWithAd(actionFn) {
  try {
    await showMonetixAd();
    await actionFn();
  } catch (e) {
    if (typeof showAlert === "function") {
      showAlert(e);
    } else {
      alert(e);
    }
  }
}
</script>

<!-- YOUR EXISTING JS FILES (UNCHANGED) -->
<!-- <script src="app.js"></script> -->

</body>
</html>
